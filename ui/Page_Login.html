<script type="text/babel">
  const PageLogin = ({ onLogin, onGoToRegister }) => {
      const [sid, setSid] = useState('');
      const [loading, setLoading] = useState(false);
      const [msg, setMsg] = useState({ text: '', type: '' });

      useEffect(() => { lucide.createIcons(); }, [msg]);

      const handleLogin = () => {
          if (!sid) { setMsg({ text: "VUI LÒNG NHẬP MÃ NHÂN VIÊN!", type: 'error' }); return; }
          setLoading(true);
          google.script.run
              .withSuccessHandler(res => {
                  setLoading(false);
                  if (res.success) onLogin(res.user);
                  else setMsg({ text: res.message, type: 'error' });
              })
              .login(sid.trim().toUpperCase());
      };

      return (
          <div className="min-h-screen flex flex-col items-center justify-center p-8 fade-in bg-white">
              <Notification message={msg.text} type={msg.type} onClose={() => setMsg({text:'', type:''})} />
              <div className="w-full max-w-sm space-y-10 text-center">
                  <img src="https://theme.hstatic.net/200000475475/1000828169/14/logo.png?v=91" className="w-24 mx-auto drop-shadow-xl" />
                  <div className="space-y-1">
                      <h1 className="text-2xl font-black text-gray-900 tracking-tighter uppercase leading-none">Thái Mậu Group</h1>
                      <p className="text-[10px] font-bold text-gray-400 uppercase tracking-[0.3em]">Hệ thống vận hành v1.0</p>
                  </div>
                  <div className="space-y-4">
                      <input className="input-base !bg-gray-50 border-transparent focus:!bg-white focus:border-blue-500 uppercase tracking-widest font-black text-center" placeholder="MÃ NHÂN VIÊN" value={sid} onChange={e => setSid(e.target.value.toUpperCase())} onKeyUp={e => e.key === 'Enter' && handleLogin()} />
                      <button className={`w-full py-4 rounded-2xl flex items-center justify-center gap-3 text-white font-black text-xs uppercase tracking-widest shadow-xl transition-all active:scale-95 ${loading ? 'bg-gray-400' : 'bg-gradient-to-r from-blue-600 to-indigo-700 shadow-blue-200'}`} onClick={handleLogin} disabled={loading}>
                          {loading ? <div className="spinner"></div> : 'Đăng nhập ngay'}
                      </button>
                  </div>
                  <div className="pt-4">
                      <button onClick={(e) => { e.preventDefault(); onGoToRegister(); }} className="text-[10px] font-bold text-blue-600 uppercase tracking-wider hover:underline opacity-70">Đăng ký nhân viên mới</button>
                  </div>
              </div>
          </div>
      );
  };
</script>